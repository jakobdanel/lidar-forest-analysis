{
  "hash": "d9d777772d1ebd60b41645f94447f6f9",
  "result": {
    "markdown": "::: {.cell}\n\n:::\n\n\n## Researched areas\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(ggplot2)\nsf::sf_use_s2(FALSE)\npatches <- sf::read_sf(\"research_areas.shp\") |> sf::st_centroid()\n\nde <- sf::read_sf(\"results/results/states_de/Bundesländer_2017_mit_Einwohnerzahl.shp\") # Source: https://hub.arcgis.com/datasets/esri-de-content::bundesl%C3%A4nder-2017-mit-einwohnerzahl/explore?location=51.099647%2C10.454033%2C7.43\nnrw <- de[5,] |> sf::st_geometry()\n\n\nggplot() + geom_sf(data = nrw) + \n    geom_sf(data = patches, mapping = aes(col = species))\n```\n\n::: {.cell-output-display}\n![Locations of the different patches with the dominant species for that patch. The patches centroids are displayed on a basemap describing the borders from NRW.](researched-areas_files/figure-html/fig-patches-nrw-1.png){#fig-patches-nrw width=672}\n:::\n:::\n\nWe draw three patches for each species from different regions (see @tbl-summary-researched-areas). We download the LiDAR data for those patches and runned all preprocessing steps as described. We than checked with certain derived parameters (e.g. tree heights, tree distributions or tree density) that all patches contain valid forest data. In that step we discovered, that in one patch some forest clearance took place in the near past. This patch was removed from the dataset and was replaced with a new one.    \n\nIn our research, drawing patches evenly distributed across Nordrhein-Westfalia is inherently constrained by natural factors. Consequently, the patches for oak and pine predominantly originate from the Münsterland region, as illustrated in [@fig-patches-nrw]. For spruce, the patches were derived from Sauerland, reflecting the prevalence of spruce forests in this specific region within NRW, as corroborated by Welle et al. [@welle2014] and Blickensdörfer et al. [@Blickensdoerfer2022]. Beech patches, on the other hand, were generated from diverse locations within NRW. Across all patches, no human-made objects were identified, with the exception of small paths for pedestrians and forestry vehicles.\n\nThe distribution of area and detections is notable for each four species. Beech covers 69,791.9 hectares with a total of 5,954 detections, oak spans 63,232.49 hectares with 5,354 detections, pine extends across 72,862.4 hectares with 8,912 detections, and spruce encompasses 57,940.02 hectares with 8,619 detections. Both the amount of detections and the corresponding area exhibit a relatively uniform distribution across the diverse patches, as summarized in @tbl-summary-researched-areas. \n\nWith the selected dataset described, we intentionally chose three patches for each four species that exhibit a practical and usable size for our research objectives. These carefully chosen patches align with the conditions essential for our study, providing comprehensive and representative data for in-depth analysis and meaningful insights into the characteristics of each tree species within the specified areas.\n\n\n\n::: {#tbl-summary-researched-areas .cell tbl-cap='Summary of researched patches grouped by species, with their location, area and the amount of detected trees.'}\n\n```{.r .cell-code  code-fold=\"true\"}\nshp <- sf::read_sf(\"research_areas.shp\")\ntable <- lfa::lfa_get_all_areas()\n\nsf::sf_use_s2(FALSE)\nfor (row in 1:nrow(table)) {\n  area <-\n    dplyr::filter(shp, shp$species == table[row, \"specie\"] &\n                    shp$name == table[row, \"area\"])\n  area_size <- area |> sf::st_area()\n  point <- area |> sf::st_centroid() |> sf::st_coordinates()\n  table[row,\"point\"] <- paste0(\"(\",round(point[1], digits = 4),\", \",round(point[2],digits = 4),\")\")\n  \n  table[row, \"area_size\"] = round(area_size,digits = 2) #paste0(round(area_size,digits = 2), \" m²\")\n  \n  amount_det <- nrow(lfa::lfa_get_detection_area(table[row, \"specie\"], table[row, \"area\"]))\n  if(is.null(amount_det)){\n    cat(nrow(lfa::lfa_get_detection_area(table[row, \"specie\"], table[row, \"area\"])),table[row, \"specie\"],table[row, \"area\"])\n  }\n  table[row, \"amount_detections\"] = amount_det\n  \n  # table[row, \"specie\"] <- lfa::lfa_capitalize_first_char(table[row,\"specie\"])\n  table[row, \"area\"] <- lfa::lfa_capitalize_first_char(table[row,\"area\"])\n  }\ntable$area <- gsub(\"_\", \" \", table$area)\ntable$area <- gsub(\"ue\", \"ü\", table$area)\ntable = table[,!names(table) %in% c(\"specie\")]\n\nknitr::kable(table, \"html\", col.names = c(\"Patch Name\",\"Location\",\"Area size (m²)\",\"Amount tree detections\" ), caption = NULL, digits = 2, escape = TRUE) |>\n  kableExtra::kable_styling(\n    bootstrap_options = c(\"striped\", \"hold_position\", \"bordered\",\"responsive\"),\n    stripe_index = c(1:3,7:9),\n    full_width = FALSE\n  ) |>\n  kableExtra::pack_rows(\"Beech\", 1, 3) |>\n  kableExtra::pack_rows(\"Oak\", 4, 6) |>\n  kableExtra::pack_rows(\"Pine\", 7, 9) |>\n  kableExtra::pack_rows(\"Spruce\", 10, 12) |>\n  kableExtra::column_spec(1, bold = TRUE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-bordered table-responsive\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Patch Name </th>\n   <th style=\"text-align:left;\"> Location </th>\n   <th style=\"text-align:right;\"> Area size (m²) </th>\n   <th style=\"text-align:right;\"> Amount tree detections </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Beech</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Bielefeld brackwede </td>\n   <td style=\"text-align:left;\"> (8.5244, 51.9902) </td>\n   <td style=\"text-align:right;\"> 161410.57 </td>\n   <td style=\"text-align:right;\"> 1443 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Billerbeck </td>\n   <td style=\"text-align:left;\"> (7.3273, 51.9987) </td>\n   <td style=\"text-align:right;\"> 185887.25 </td>\n   <td style=\"text-align:right;\"> 1732 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Wülfenrath </td>\n   <td style=\"text-align:left;\"> (7.0769, 51.2917) </td>\n   <td style=\"text-align:right;\"> 350621.21 </td>\n   <td style=\"text-align:right;\"> 2779 </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Oak</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Hamm </td>\n   <td style=\"text-align:left;\"> (7.8618, 51.6639) </td>\n   <td style=\"text-align:right;\"> 269397.22 </td>\n   <td style=\"text-align:right;\"> 2441 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Münster </td>\n   <td style=\"text-align:left;\"> (7.6187, 51.9174) </td>\n   <td style=\"text-align:right;\"> 164116.61 </td>\n   <td style=\"text-align:right;\"> 1270 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Rinkerode </td>\n   <td style=\"text-align:left;\"> (7.6744, 51.8598) </td>\n   <td style=\"text-align:right;\"> 198811.09 </td>\n   <td style=\"text-align:right;\"> 1643 </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Pine</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Greffen </td>\n   <td style=\"text-align:left;\"> (8.1697, 51.9913) </td>\n   <td style=\"text-align:right;\"> 49418.81 </td>\n   <td style=\"text-align:right;\"> 513 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Mesum </td>\n   <td style=\"text-align:left;\"> (7.5403, 52.2573) </td>\n   <td style=\"text-align:right;\"> 405072.85 </td>\n   <td style=\"text-align:right;\"> 5031 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Telgte </td>\n   <td style=\"text-align:left;\"> (7.7816, 52.0024) </td>\n   <td style=\"text-align:right;\"> 274132.34 </td>\n   <td style=\"text-align:right;\"> 3368 </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"4\" style=\"border-bottom: 1px solid;\"><strong>Spruce</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Brilon </td>\n   <td style=\"text-align:left;\"> (8.5352, 51.4084) </td>\n   <td style=\"text-align:right;\"> 211478.20 </td>\n   <td style=\"text-align:right;\"> 3342 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Oberhundem </td>\n   <td style=\"text-align:left;\"> (8.1861, 51.0909) </td>\n   <td style=\"text-align:right;\"> 151895.53 </td>\n   <td style=\"text-align:right;\"> 2471 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;font-weight: bold;\" indentlevel=\"1\"> Osterwald </td>\n   <td style=\"text-align:left;\"> (8.3721, 51.2151) </td>\n   <td style=\"text-align:right;\"> 216026.43 </td>\n   <td style=\"text-align:right;\"> 2806 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n",
    "supporting": [
      "researched-areas_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}